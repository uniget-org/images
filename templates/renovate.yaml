renovate:
  rules:
  - if: $CI_PIPELINE_SOURCE == "push" && $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH
    changes:
    - templates/renovate.yaml
  - if: $CI_PIPELINE_SOURCE == "schedule" && $SCHEDULED_JOB == "renovate"
  - if: $CI_PIPELINE_SOURCE == "web" && $SCHEDULED_JOB == "renovate"
  image: renovate/renovate:38.132.1
  variables:
    RENOVATE_PLATFORM: gitlab
    RENOVATE_ENDPOINT: "${CI_API_V4_URL}"
    RENOVATE_AUTODISCOVER: "false"
    LOG_LEVEL: "debug"
    #LOG_FORMAT: "json"
  script:
  - |
    renovate "${CI_PROJECT_PATH}"